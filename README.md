# Задание
1. Имеется приложение, состоящее из нескольких реплик, которое требуется обновить.
2. Ресурсы, выделенные для приложения, ограничены, и нет возможности их увеличить.
3. Запас по ресурсам в менее загруженный момент времени составляет 20%.
4. Обновление мажорное, новые версии приложения не умеют работать со старыми.
5. Вам нужно объяснить свой выбор стратегии обновления приложения.

# Решение 
Так как в менее загруженный момент времени 20% ресурсов свободны, то обновление необходимо проводить в этот момент. Для такого обновления подходит обновление типа Rolling Update, так как он постепенно один за другим меняет поды, т.е. если у нас 3 пода, он добавит один под и их станет 4 если всё хорошо пройдёт то один под удалится их опять станет 3 и так до полного обновления.

# Задание
1. Создать deployment приложения с контейнерами nginx и multitool. Версию nginx взять 1.19. Количество реплик — 5.
2. Обновить версию nginx в приложении до версии 1.20, сократив время обновления до минимума. Приложение должно быть доступно.
3. Попытаться обновить nginx до версии 1.28, приложение должно оставаться доступным.
4. Откатиться после неудачного обновления.

# Решение
1. ![image](https://github.com/Kul-RB/k8s/assets/53901269/8255456c-944b-4a7f-b636-440e611e04c8)

2. ![image](https://github.com/Kul-RB/k8s/assets/53901269/2252829d-38ec-4db2-9ca1-9ad61c8c76a2)

![image](https://github.com/Kul-RB/k8s/assets/53901269/2e0beb71-d004-4d7a-a059-1978d977265c)

3. ![image](https://github.com/Kul-RB/k8s/assets/53901269/b4e91f31-7e34-498e-b540-48c0ba26bbb0)

![image](https://github.com/Kul-RB/k8s/assets/53901269/2f548f85-d894-45bd-b7e2-23bcd6a95d1c)

4. ![image](https://github.com/Kul-RB/k8s/assets/53901269/ed741c7b-d820-4e85-ae4a-dd0a5dd1cd39)
 
![image](https://github.com/Kul-RB/k8s/assets/53901269/9888b0f9-90f8-4047-a141-cf177587a75a)

![image](https://github.com/Kul-RB/k8s/assets/53901269/572b9544-286b-484d-99cf-8680676c23fe)

# Задание
1. Создать два deployment'а приложения nginx.
2. При помощи разных ConfigMap сделать две версии приложения — веб-страницы.
3. С помощью ingress создать канареечный деплоймент, чтобы можно было часть трафика перебросить на разные версии приложения.

# Решение
1. ![image](https://github.com/Kul-RB/k8s/assets/53901269/a5b2fc40-99b1-4b37-849f-8d4f3418aca2)

## v1
![image](https://github.com/Kul-RB/k8s/assets/53901269/17810482-81dd-4de6-a015-aeaa233acc56)

## v2
![image](https://github.com/Kul-RB/k8s/assets/53901269/d78781cb-ee25-4917-8f8d-9091d5c285b7)

4. ![image](https://github.com/Kul-RB/k8s/assets/53901269/667831cc-5c32-419b-a3a1-d8ddab036600)
